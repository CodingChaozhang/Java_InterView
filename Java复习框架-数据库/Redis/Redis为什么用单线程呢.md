# Redis为什么用单线程呢？

> Redis采用的是基于内存的，采用单进程单线程模型的KV数据库，官方提供的数据是可以达到100000+的QPS(每秒内的查询次数)。这个数据不比单进程多线程的同样基于内存的KV数据库Memcached差！



**那么Redis为什么这么快**

- (1) 完全基于内存的，绝大部分请求是纯粹的内存操作，非常快速。数据存在内存中，类似于HashMap，HashMap的优势就是查找和操作的时间复杂度都是O(1);
- (2) 数据结构简单，对数据操作也很简单。其中常见的数据结构类型有：String、List、Set、Zset和Hash这5种。
- (3) 采用单线程，避免了不必要的上下文切换和竞争条件，也不存在多进程或者多线程导致的切换而消耗CPU，不用去考虑各种锁的问题，不存在加锁释放锁的操作，没有因为可能出现死锁而导致的性能消耗；
- (4)采用多路I/O复用模型，非阻塞IO

多路复用I/O模型中：“**多路**”指的是多个网络连接，“**复用**”指的是复用同一个线程。采用多路I/O复用技术可以让单个线程高效的处理多个连接请求(尽量减少网络IO的时间消耗)。

总之，多路I/O复用模型是利用select、poll、epoll可以同时监察多个流的I/O事件的能力，在空闲的时候，会把当前线程阻塞掉，当有一个或多个流有I/O事件时，就从阻塞态中唤醒。于是程序就会轮询一遍所有的流(epoll是只轮询那些真正发出了事件的流)，并且只依次顺序的处理就绪的流，这种做法就避免了大量的无用操作。

**那么为什么Redis是单线程的呢？**

官方表示，因为Redis是基于内存的操作，CPU不是Redis的瓶颈，Redis的瓶颈最优可能是机器内存的大小或者网络带宽。既然单线程容易实现，而且CPU不会成为瓶颈，那就顺理成章地采用单线程的方案了。

> 但是，使用单线程的方式是无法发挥多核CPU性能，不过 可以在单机上开多个Redis实例来完善！